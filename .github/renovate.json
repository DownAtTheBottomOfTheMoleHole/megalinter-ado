{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Renovate config for megalinter-ado Azure DevOps extension",
  "extends": ["config:best-practices", "group:allNonMajor"],
  "addLabels": ["renovate", "bot", "dependencies"],
  "timezone": "GB",
  "schedule": ["after 9am and before 5pm every weekday"],
  "prConcurrentLimit": 5,
  "prHourlyLimit": 2,
  "prCreation": "immediate",
  "pruneBranchAfterAutomerge": true,
  "automerge": true,
  "separateMajorMinor": true,
  "separateMultipleMajor": true,
  "ignoreDeprecated": true,
  "ignoreUnstable": true,
  "updatePinnedDependencies": true,
  "ignorePaths": [
    "**/megalinter/package-lock.json",
    "**/pnpm-lock.yaml",
    "**/yarn.lock"
  ],
  "packageRules": [
    {
      "description": "Dont update Azure Pipelines tasks, it breaks things",
      "enabled": false,
      "extractVersion": "^(?<version>\\d+)",
      "matchDatasources": ["azure-pipelines-tasks"]
    },
    {
      "description": "Require manual merge for all major updates",
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "addLabels": ["Semver Major"]
    },
    {
      "description": "Auto-label minor updates",
      "matchUpdateTypes": ["minor"],
      "addLabels": ["Semver Minor"]
    },
    {
      "description": "Auto-label patch updates",
      "matchUpdateTypes": ["patch"],
      "addLabels": ["Semver Patch"]
    },
    {
      "description": "Pin digests for GitHub Actions for supply-chain security",
      "matchDatasources": ["github-tags", "github-releases"],
      "matchPackageNames": ["/^actions\\//"],
      "pinDigests": true,
      "addLabels": ["GitHub Actions"]
    },
    {
      "description": "Group GitHub Actions updates together",
      "matchManagers": ["github-actions"],
      "groupName": "GitHub Actions",
      "addLabels": ["GitHub Actions"]
    },
    {
      "description": "Group pre-commit hook updates together",
      "matchManagers": ["pre-commit"],
      "groupName": "pre-commit hooks",
      "addLabels": ["linting"]
    },
    {
      "description": "Group MegaLinter-related updates (runner, pre-commit hook, Docker image)",
      "matchPackageNames": [
        "mega-linter-runner",
        "oxsecurity/megalinter",
        "oxsecurity/megalinter-security"
      ],
      "groupName": "MegaLinter",
      "addLabels": ["MegaLinter"]
    },
    {
      "description": "Group Azure Pipelines task library updates",
      "matchPackageNames": ["azure-pipelines-task-lib"],
      "groupName": "Azure Pipelines Task Lib",
      "addLabels": ["Azure Pipelines"]
    },
    {
      "description": "Group TypeScript tooling updates",
      "matchPackageNames": [
        "typescript",
        "typescript-eslint",
        "@types/node",
        "@types/mocha",
        "@types/q"
      ],
      "groupName": "TypeScript tooling"
    },
    {
      "description": "Group testing framework updates",
      "matchPackageNames": [
        "@cucumber/cucumber",
        "nyc",
        "sync-request",
        "ts-node"
      ],
      "groupName": "testing frameworks"
    },
    {
      "description": "Group linting and formatting tool updates",
      "matchPackageNames": ["eslint", "@eslint/js", "prettier"],
      "groupName": "linters and formatters",
      "addLabels": ["linting"]
    },
    {
      "description": "Label security scanner updates",
      "matchPackageNames": ["Yelp/detect-secrets"],
      "addLabels": ["security"]
    }
  ]
}
